(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{14:function(e,t,n){e.exports={wrapper:"RegisterForm_wrapper__cNr4p",label:"RegisterForm_label__gZxu9",input:"RegisterForm_input__3dB_S",button:"RegisterForm_button__1zYSb"}},19:function(e,t,n){e.exports={nav:"AppBar_nav__1frJk",list:"AppBar_list__eDnui",item:"AppBar_item__53XN5",link:"AppBar_link__3rckl"}},20:function(e,t,n){e.exports={wrapper:"AddContactForm_wrapper__3USjG",label:"AddContactForm_label__2PpxK",input:"AddContactForm_input__3ogvm",button:"AddContactForm_button__3rwTu"}},21:function(e,t,n){e.exports={wrapper:"LoginForm_wrapper__3oIMw",label:"LoginForm_label__2sI4n",input:"LoginForm_input__uJM09",button:"LoginForm_button__xZNTq"}},33:function(e,t,n){e.exports={wrapper:"Filter_wrapper__1mRh4",label:"Filter_label__2vBHA",input:"Filter_input__10RlN"}},34:function(e,t,n){e.exports={item:"Contacts_item__1_3u5",paragraph:"Contacts_paragraph__dntGo",button:"Contacts_button__2_wZz"}},38:function(e,t,n){e.exports={section:"Section_section__2PonD",title:"Section_title__31sD5"}},39:function(e,t,n){e.exports={paragraph:"UserMenu_paragraph__RaNi3",button:"UserMenu_button__1Rfdu"}},82:function(e,t,n){},86:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(30),s=n.n(c),i=n(17),o=n(6),l=n(52),u=n(3),b=n(18),j=n(12),p=n.n(j),d=n(22),m=n(16),h=n.n(m),O=Object(u.createAsyncThunk)("contacts/fetchContacts",Object(d.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.get("/contacts");case 3:return t=e.sent,n=t.data,e.abrupt("return",n);case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})))),x=Object(u.createAsyncThunk)("contacts/addContact",function(){var e=Object(d.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.post("/contacts",t);case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()),f={fetchContacts:O,addContact:x},g=Object(u.createSlice)({name:"filter",initialState:"",reducers:{setFilter:function(e,t){return t.payload}}}),v=Object(u.createSlice)({name:"contacts",initialState:{items:[]},extraReducers:Object(b.a)({},f.fetchContacts.fulfilled,(function(e,t){e.items=t.payload}))}),_={setFilter:g.actions.setFilter},w=g.reducer,N=v.reducer,C=n(50);h.a.defaults.baseURL="https://connections-api.herokuapp.com";var k,y=function(e){h.a.defaults.headers.common.Authorization="Bearer ".concat(e)},F=function(){h.a.defaults.headers.common.Authorization=""},A=Object(u.createAsyncThunk)("auth/register",function(){var e=Object(d.a)(p.a.mark((function e(t){var n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.post("/users/signup",t);case 3:return n=e.sent,a=n.data,y(a.token),e.abrupt("return",a);case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()),S=Object(u.createAsyncThunk)("auth/login",function(){var e=Object(d.a)(p.a.mark((function e(t){var n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.post("/users/login",t);case 3:return n=e.sent,a=n.data,y(a.token),e.abrupt("return",a);case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()),L={register:A,login:S,logout:Object(u.createAsyncThunk)("auth/logout",Object(d.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.post("/users/logout");case 3:return t=e.sent,n=t.data,F(),e.abrupt("return",n);case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])}))))},R=Object(u.createSlice)({name:"auth",initialState:{user:{name:null,email:null},token:null,isLoggedIn:!1},extraReducers:(k={},Object(b.a)(k,L.register.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0})),Object(b.a)(k,L.login.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0})),Object(b.a)(k,L.logout.fulfilled,(function(e){e.user={name:null,email:null},e.token=null,e.isLoggedIn=!1})),k)}).reducer,I=Object(u.configureStore)({reducer:{filter:w,auth:R,contacts:N},middleware:function(e){return Object(l.a)(e())},devTools:!1});Object(C.setupListeners)(I.dispatch);n(81),n(82);var B=n(5),q=n(24),z=n(32),D=n(0),T=["children"];function M(e){var t=e.children,n=Object(z.a)(e,T);return Object(D.jsx)(B.a,Object(q.a)(Object(q.a)({},n),{},{children:t}))}var P=["children"];function Z(e){var t=e.children,n=Object(z.a)(e,P);return Object(D.jsx)(B.a,Object(q.a)(Object(q.a)({},n),{},{children:t}))}var J=function(e){return e.auth.isLoggedIn},E=function(e){return e.auth.user.name},U=n(38),G=n.n(U);function H(e){var t=e.title,n=e.children;return Object(D.jsxs)("section",{className:G.a.section,children:[Object(D.jsx)("h2",{className:G.a.title,children:t}),n]})}var K=n(39),X=n.n(K);function Y(){var e=Object(o.b)(),t=Object(o.c)(J),n=Object(o.c)(E);return t&&Object(D.jsxs)("div",{children:[Object(D.jsxs)("p",{className:X.a.paragraph,children:["Hello, ",n]}),Object(D.jsx)("button",{onClick:function(){return e(L.logout())},className:X.a.button,type:"button",children:"Logout"})]})}var $=n(19),Q=n.n($);function V(){var e=Object(o.c)(J);return Object(D.jsx)(H,{title:"My phonebook",children:Object(D.jsx)("header",{children:Object(D.jsxs)("nav",{className:Q.a.nav,children:[Object(D.jsx)("ul",{children:e?Object(D.jsx)("li",{className:Q.a.item,children:Object(D.jsx)(i.b,{to:"/contacts",className:Q.a.link,children:"Contacts"})}):Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)("li",{className:Q.a.item,children:Object(D.jsx)(i.b,{to:"/register",className:Q.a.link,children:"Register"})}),Object(D.jsx)("li",{className:Q.a.item,children:Object(D.jsx)(i.b,{to:"/login",className:Q.a.link,children:"Login"})})]})}),Object(D.jsx)(Y,{})]})})})}var W=function(e){return e.filter},ee=function(e){return e.contacts.items},te=n(33),ne=n.n(te);function ae(e){var t=e.value,n=e.onChange;return Object(D.jsxs)("div",{className:ne.a.wrapper,children:[Object(D.jsx)("label",{className:ne.a.label,htmlFor:"filter",children:"Find contacts by name"}),Object(D.jsx)("input",{className:ne.a.input,id:"filter",value:t,onChange:n})]})}var re=n(34),ce=n.n(re);function se(e){var t=e.contacts,n=e.onDeleteClick;return Object(D.jsx)("ul",{children:t.map((function(e){var t=e.id,a=e.name,r=e.number;return Object(D.jsxs)("li",{className:ce.a.item,name:a,children:[Object(D.jsxs)("p",{className:ce.a.paragraph,children:[Object(D.jsx)("span",{children:a}),Object(D.jsx)("span",{children:r})]}),Object(D.jsx)("button",{className:ce.a.button,onClick:function(){return n(t)},type:"button",children:"Delete"})]},t)}))})}var ie=n(15),oe=n(20),le=n.n(oe);function ue(e){var t=e.onSubmitContact,n=Object(a.useState)(""),r=Object(ie.a)(n,2),c=r[0],s=r[1],i=Object(a.useState)(""),o=Object(ie.a)(i,2),l=o[0],u=o[1];function b(e){var t=e.target,n=t.name,a=t.value;"name"===n&&s(a),"number"===n&&u(a)}return Object(D.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t({name:c,number:l}),s(""),u("")},children:[Object(D.jsxs)("div",{className:le.a.wrapper,children:[Object(D.jsx)("label",{className:le.a.label,htmlFor:"name",children:"Name:"}),Object(D.jsx)("input",{className:le.a.input,value:c,onChange:b,type:"text",id:"name",name:"name",pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$",title:"Name may contain only letters, apostrophe, dash and spaces. For example Adrian, Jacob Mercer, Charles de Batz de d'Artagnan",autoComplete:"off",required:!0})]}),Object(D.jsxs)("div",{className:le.a.wrapper,children:[Object(D.jsx)("label",{className:le.a.label,htmlFor:"number",children:"Phone:"}),Object(D.jsx)("input",{className:le.a.input,value:l,onChange:b,type:"tel",id:"number",name:"number",pattern:"\\+?\\d{1,4}?[-.\\s]?\\(?\\d{1,3}?\\)?[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,9}",title:"Phone number must be digits and can contain spaces, dashes, parentheses and can start with +",required:!0})]}),Object(D.jsx)("button",{className:le.a.button,type:"submit",children:"Add contact"})]})}function be(){var e=Object(o.b)(),t=Object(o.c)(ee),n=Object(o.c)(W);console.log(t),Object(a.useEffect)((function(){e(f.fetchContacts())}),[e]);e(f.fetchContacts());var r=n.toLowerCase(),c=Array.isArray(t)?t.filter((function(e){return e.name.toLowerCase().includes(r)})):t;return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(H,{title:"Add new contact",children:Object(D.jsx)(ue,{onSubmitContact:function(t){return e(f.addContact(t))}})}),Object(D.jsxs)(H,{title:"Contacts",children:[Object(D.jsx)(ae,{value:n,onChange:function(t){return e(_.setFilter(t.target.value))}}),Array.isArray(t)&&Object(D.jsx)(se,{contacts:c.reverse()})]})]})}var je=n(21),pe=n.n(je);function de(){var e=Object(o.b)(),t=Object(a.useState)(""),n=Object(ie.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)(""),i=Object(ie.a)(s,2),l=i[0],u=i[1];function b(e){var t=e.target,n=t.name,a=t.value;"email"===n&&c(a),"password"===n&&u(a)}return Object(D.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e(L.login({email:r,password:l})),c(""),u("")},children:[Object(D.jsxs)("div",{className:pe.a.wrapper,children:[Object(D.jsx)("label",{className:pe.a.label,htmlFor:"loginInLogin",children:"Email:"}),Object(D.jsx)("input",{className:pe.a.input,value:r,onChange:b,type:"text",id:"emailInLogin",name:"email",autoComplete:"on",required:!0})]}),Object(D.jsxs)("div",{className:pe.a.wrapper,children:[Object(D.jsx)("label",{className:pe.a.label,htmlFor:"passwordInLogin",children:"Password:"}),Object(D.jsx)("input",{className:pe.a.input,value:l,onChange:b,type:"password",id:"passwordInLogin",name:"password",autoComplete:"on",required:!0})]}),Object(D.jsx)("button",{className:pe.a.button,type:"submit",children:"Login"})]})}function me(){return Object(D.jsx)(D.Fragment,{children:Object(D.jsx)(H,{title:"Login",children:Object(D.jsx)(de,{})})})}var he=n(14),Oe=n.n(he);function xe(){var e=Object(o.b)(),t=Object(a.useState)(""),n=Object(ie.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)(""),i=Object(ie.a)(s,2),l=i[0],u=i[1],b=Object(a.useState)(""),j=Object(ie.a)(b,2),p=j[0],d=j[1];function m(e){var t=e.target,n=t.name,a=t.value;"name"===n&&c(a),"email"===n&&u(a),"password"===n&&d(a)}return Object(D.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e(L.register({name:r,email:l,password:p})),c(""),u(""),d("")},children:[Object(D.jsxs)("div",{className:Oe.a.wrapper,children:[Object(D.jsx)("label",{className:Oe.a.label,htmlFor:"nameInRegister",children:"Name:"}),Object(D.jsx)("input",{className:Oe.a.input,value:r,onChange:m,type:"text",id:"nameInRegister",name:"name",autoComplete:"on",required:!0})]}),Object(D.jsxs)("div",{className:Oe.a.wrapper,children:[Object(D.jsx)("label",{className:Oe.a.label,htmlFor:"emailInRegister",children:"Email:"}),Object(D.jsx)("input",{className:Oe.a.input,value:l,onChange:m,type:"text",id:"emailInRegister",name:"email",autoComplete:"on",required:!0})]}),Object(D.jsxs)("div",{className:Oe.a.wrapper,children:[Object(D.jsx)("label",{className:Oe.a.label,htmlFor:"passwordInRegister",children:"Password:"}),Object(D.jsx)("input",{className:Oe.a.input,value:p,onChange:m,type:"password",id:"passwordInRegister",name:"password",autoComplete:"on",required:!0})]}),Object(D.jsx)("button",{className:Oe.a.button,type:"submit",children:"Register"})]})}function fe(){return Object(D.jsx)(D.Fragment,{children:Object(D.jsx)(H,{title:"Register",children:Object(D.jsx)(xe,{})})})}function ge(){return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(V,{}),Object(D.jsxs)(B.c,{children:[Object(D.jsx)(Z,{exact:!0,path:"/register",children:Object(D.jsx)(fe,{})}),Object(D.jsx)(Z,{exact:!0,path:"/login",children:Object(D.jsx)(me,{})}),Object(D.jsx)(M,{exact:!0,path:"/contacts",children:Object(D.jsx)(be,{})})]})]})}s.a.render(Object(D.jsx)(r.a.StrictMode,{children:Object(D.jsx)(o.a,{store:I,children:Object(D.jsx)(i.a,{children:Object(D.jsx)(ge,{})})})}),document.getElementById("root"))}},[[86,1,2]]]);
//# sourceMappingURL=main.f7c3deb2.chunk.js.map